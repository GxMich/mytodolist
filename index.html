<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#E8A849">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" href="/resorces/img/logo.png">
    <link rel="stylesheet" href="./resorces/css/header.css">
    <link rel="stylesheet" href="./resorces/css/index.css">
    <link rel="stylesheet" href="./resorces/css/generic.css">
    <link rel="stylesheet" href="./resorces/css/today.css">
    <link rel="stylesheet" href="./resorces/css/addtask.css">
    <link rel="stylesheet" href="./resorces/css/login.css">
    <link rel="stylesheet" href="./resorces/css/landing.css">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <title>My to do list</title>
</head>

<body>

    <script src="./resorces/js/theme-toggle.js"></script>
    <script src="./resorces/js/landing.js" defer></script>
    <script src="./resorces/js/auth-check.js" defer></script>
    <script src="./resorces/js/search.js" defer></script>
    <script src="./resorces/js/main.js" defer></script>
    <script src="./resorces/js/auth.js" defer></script>
    <script src="./resorces/js/header.js" defer></script>
    <script src="./resorces/js/index.js" defer></script>
    <script src="./resorces/js/today.js" defer></script>
    <script src="./resorces/js/addtask.js" defer></script>
    <script src="./resorces/js/notes.js" defer></script>
    <script src="./resorces/js/calendar.js" defer></script>
    <script src="./resorces/js/settings.js" defer></script>

    <!-- ====== LANDING PAGE ====== -->
    <div id="landing-container" class="hide">
        <img class="landing-logo" src="./resorces/img/logo.png" alt="TaskFlow Logo">
        <h1 class="landing-title">Task<span class="accent">Flow</span></h1>
        <p class="landing-tagline">Organizza le tue giornate, gestisci task, note e calendario ‚Äî tutto in un unico
            posto, con stile.</p>

        <div class="landing-features">
            <div class="feature-card">
                <div class="feature-icon icon-tasks">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                        stroke-linecap="round" stroke-linejoin="round">
                        <path d="M9 11l3 3L22 4" />
                        <path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11" />
                    </svg>
                </div>
                <span class="feature-label">Task</span>
            </div>
            <div class="feature-card">
                <div class="feature-icon icon-notes">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                        stroke-linecap="round" stroke-linejoin="round">
                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" />
                        <polyline points="14 2 14 8 20 8" />
                        <line x1="16" y1="13" x2="8" y2="13" />
                        <line x1="16" y1="17" x2="8" y2="17" />
                    </svg>
                </div>
                <span class="feature-label">Note</span>
            </div>
            <div class="feature-card">
                <div class="feature-icon icon-calendar">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                        stroke-linecap="round" stroke-linejoin="round">
                        <rect x="3" y="4" width="18" height="18" rx="2" ry="2" />
                        <line x1="16" y1="2" x2="16" y2="6" />
                        <line x1="8" y1="2" x2="8" y2="6" />
                        <line x1="3" y1="10" x2="21" y2="10" />
                    </svg>
                </div>
                <span class="feature-label">Calendario</span>
            </div>
        </div>

        <button class="landing-cta" id="landing-start-btn">
            Inizia ora
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                <line x1="5" y1="12" x2="19" y2="12" />
                <polyline points="12 5 19 12 12 19" />
            </svg>
        </button>

        <p class="landing-footer">Gratuito &middot; Sicuro &middot; Sempre disponibile</p>
    </div>

    <div id="auth-container" class="hide">
        <div class="auth-box">
            <div class="auth-logo">
                <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none"
                    stroke="var(--primary)" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" />
                    <rect x="9" y="10" width="6" height="5" rx="1" />
                    <path d="M10 10V8a2 2 0 0 1 4 0v2" />
                </svg>
            </div>
            <h1 id="auth-title">Bentornato</h1>
            <p id="auth-subtitle" class="auth-subtitle">Accedi al tuo account</p>

            <!-- LOGIN FORM -->
            <form id="loginForm" class="auth-form">
                <div class="input-group">
                    <svg class="input-icon" xmlns="http://www.w3.org/2000/svg" width="18" height="18"
                        viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" />
                        <circle cx="12" cy="7" r="4" />
                    </svg>
                    <input type="text" id="loginCredenziale" class="input-field" placeholder=" " required
                        autocomplete="username">
                    <label for="loginCredenziale">Username o Email</label>
                </div>
                <div class="input-group">
                    <svg class="input-icon" xmlns="http://www.w3.org/2000/svg" width="18" height="18"
                        viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <rect x="3" y="11" width="18" height="11" rx="2" ry="2" />
                        <path d="M7 11V7a5 5 0 0 1 10 0v4" />
                    </svg>
                    <input type="password" id="loginPassword" class="input-field" placeholder=" " required
                        autocomplete="current-password">
                    <label for="loginPassword">Password</label>
                    <button type="button" class="pwd-toggle" data-target="loginPassword"
                        title="Mostra/Nascondi password">
                        <svg class="eye-open" xmlns="http://www.w3.org/2000/svg" width="18" height="18"
                            viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                            stroke-linecap="round" stroke-linejoin="round">
                            <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z" />
                            <circle cx="12" cy="12" r="3" />
                        </svg>
                        <svg class="eye-closed hide" xmlns="http://www.w3.org/2000/svg" width="18" height="18"
                            viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                            stroke-linecap="round" stroke-linejoin="round">
                            <path
                                d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24" />
                            <line x1="1" y1="1" x2="23" y2="23" />
                        </svg>
                    </button>
                </div>
                <button type="submit" class="auth-button">
                    <svg class="btn-icon" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4" />
                        <polyline points="10 17 15 12 10 7" />
                        <line x1="15" y1="12" x2="3" y2="12" />
                    </svg>
                    Accedi
                </button>
                <p id="loginMessage" class="auth-message"></p>
                <p class="auth-switch">Non hai un account? <span id="switchToRegister" class="link-text">Registrati
                        qui</span></p>
            </form>

            <!-- REGISTER FORM -->
            <form id="registerForm" class="auth-form" style="display:none;">
                <div class="input-group">
                    <svg class="input-icon" xmlns="http://www.w3.org/2000/svg" width="18" height="18"
                        viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" />
                        <circle cx="12" cy="7" r="4" />
                    </svg>
                    <input type="text" id="registerUsername" class="input-field" placeholder=" " required minlength="3"
                        autocomplete="username">
                    <label for="registerUsername">Username</label>
                    <span id="username-status" class="field-status"></span>
                </div>
                <p id="username-hint" class="field-hint">Minimo 3 caratteri</p>

                <div class="input-group">
                    <svg class="input-icon" xmlns="http://www.w3.org/2000/svg" width="18" height="18"
                        viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z" />
                        <polyline points="22,6 12,13 2,6" />
                    </svg>
                    <input type="email" id="registerEmail" class="input-field" placeholder=" " required
                        autocomplete="email">
                    <label for="registerEmail">Email</label>
                    <span id="email-status" class="field-status"></span>
                </div>

                <div class="input-group">
                    <svg class="input-icon" xmlns="http://www.w3.org/2000/svg" width="18" height="18"
                        viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <rect x="3" y="11" width="18" height="11" rx="2" ry="2" />
                        <path d="M7 11V7a5 5 0 0 1 10 0v4" />
                    </svg>
                    <input type="password" id="registerPassword" class="input-field" placeholder=" " required
                        minlength="8" autocomplete="new-password">
                    <label for="registerPassword">Password</label>
                    <button type="button" class="pwd-toggle" data-target="registerPassword"
                        title="Mostra/Nascondi password">
                        <svg class="eye-open" xmlns="http://www.w3.org/2000/svg" width="18" height="18"
                            viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                            stroke-linecap="round" stroke-linejoin="round">
                            <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z" />
                            <circle cx="12" cy="12" r="3" />
                        </svg>
                        <svg class="eye-closed hide" xmlns="http://www.w3.org/2000/svg" width="18" height="18"
                            viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                            stroke-linecap="round" stroke-linejoin="round">
                            <path
                                d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24" />
                            <line x1="1" y1="1" x2="23" y2="23" />
                        </svg>
                    </button>
                </div>
                <div id="password-rules" class="password-rules">
                    <p class="rule" id="rule-length"><svg class="rule-icon" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="12" cy="12" r="10" />
                            <line x1="15" y1="9" x2="9" y2="15" />
                            <line x1="9" y1="9" x2="15" y2="15" />
                        </svg> Minimo 8 caratteri</p>
                    <p class="rule" id="rule-upper"><svg class="rule-icon" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="12" cy="12" r="10" />
                            <line x1="15" y1="9" x2="9" y2="15" />
                            <line x1="9" y1="9" x2="15" y2="15" />
                        </svg> Almeno una maiuscola</p>
                    <p class="rule" id="rule-number"><svg class="rule-icon" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="12" cy="12" r="10" />
                            <line x1="15" y1="9" x2="9" y2="15" />
                            <line x1="9" y1="9" x2="15" y2="15" />
                        </svg> Almeno un numero</p>
                </div>

                <div class="input-group">
                    <svg class="input-icon" xmlns="http://www.w3.org/2000/svg" width="18" height="18"
                        viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" />
                    </svg>
                    <input type="password" id="registerConfirmPassword" class="input-field" placeholder=" " required
                        autocomplete="new-password">
                    <label for="registerConfirmPassword">Conferma Password</label>
                    <span id="confirm-status" class="field-status"></span>
                </div>

                <button type="submit" class="auth-button" id="registerBtn" disabled>
                    <svg class="btn-icon" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2" />
                        <circle cx="8.5" cy="7" r="4" />
                        <line x1="20" y1="8" x2="20" y2="14" />
                        <line x1="23" y1="11" x2="17" y2="11" />
                    </svg>
                    Registrati
                </button>
                <p id="registerMessage" class="auth-message"></p>
                <p class="auth-switch">Hai gi√† un account? <span id="switchToLogin" class="link-text"
                        style="display:none;">Accedi qui</span></p>
            </form>
        </div>
    </div>
    <div id="app-container" class="hide">

        <header>
            <div id="intro">
                <div id="intro-info">
                    <img id="intro-info-img" src="./resorces/img/io.png" alt="MM">
                    <div id="intro-info-saluto">
                        <p id="greeting">Ciao</p>
                        <h2 id="user-name">...</h2>
                    </div>
                    <button id="searchToggle" class="icon-btn search-btn" title="Cerca" aria-label="Cerca"
                        style="display:none;">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon">
                            <circle cx="11" cy="11" r="8" />
                            <line x1="21" y1="21" x2="16.65" y2="16.65" />
                        </svg>
                    </button>
                    <button id="themeToggle" class="icon-btn theme-toggle" title="Cambia tema"
                        aria-label="Toggle theme">
                        <svg class="icon theme-icon-light" xmlns="http://www.w3.org/2000/svg" fill="none"
                            viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z" />
                        </svg>
                        <svg class="icon theme-icon-dark" xmlns="http://www.w3.org/2000/svg" fill="none"
                            viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="M21.752 15.002A9.72 9.72 0 0 1 18 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 0 0 3 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 0 0 9.002-5.998Z" />
                        </svg>
                    </button>
                    <button id="logoutButton" class="icon-btn logout-btn" title="Logout" aria-label="Logout">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon">
                            <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                            <polyline points="16 17 21 12 16 7"></polyline>
                            <line x1="21" y1="12" x2="9" y2="12"></line>
                        </svg>
                    </button>
                </div>

                <div id="intro-cit">
                    <p id="user-quote">Caricamento..</p>
                </div>
            </div>

            <div id="intro-keyword">
                <div id="keywoeds">
                    <div class="keyword shadow-4" id="keyword-01">
                        <p>Felicit√†</p>
                    </div>
                    <div class="keyword shadow-4" id="keyword-02">
                        <p>Viaggio</p>
                    </div>
                    <div class="keyword shadow-4" id="keyword-03">
                        <p>Libro</p>
                    </div>
                </div>

                <div class="keywords-more ">
                    <div id="info-keyword-01" class="info-keyword hide">
                        <div class="windows-keyword shadow-2">
                            <h3 class="keyword-title">Felicit√† / word</h3>
                            <h5 class="keyword-title">Felicit√† / word</h5>
                            <p class="keyword-info">
                                Lorem ipsum dolor sit amet consectetur adipisicing elit...
                            </p>
                        </div>
                    </div>
                    <div id="info-keyword-02" class="info-keyword hide">
                        <div class="windows-keyword shadow-4">
                            <h3 class="keyword-title">Viaggio / word</h3>
                            <h5 class="keyword-title">Felicit√† / word</h5>
                            <p class="keyword-info">
                                Lorem ipsum dolor sit amet consectetur adipisicing elit...
                            </p>
                        </div>
                    </div>
                    <div id="info-keyword-03" class="info-keyword hide">
                        <div class="windows-keyword shadow-4">
                            <h3 class="keyword-title">Libro / word</h3>
                            <h5 class="keyword-title">Felicit√† / word</h5>
                            <p class="keyword-info">
                                Lorem ipsum dolor sit amet consectetur adipisicing elit...
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <div id="navbar" class="shadow-6">
            <div id="today" class="navbar-icon navbar-icon-main-page" title="Today">
                <!-- iOS Home (house.fill) -->
                <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
                    <path
                        d="M3 9.5L12 3l9 6.5V20a1.5 1.5 0 0 1-1.5 1.5h-4a1 1 0 0 1-1-1v-4.5a1.5 1.5 0 0 0-1.5-1.5h-2A1.5 1.5 0 0 0 9.5 16v4.5a1 1 0 0 1-1 1h-4A1.5 1.5 0 0 1 3 20z" />
                </svg>
            </div>
            <div id="calendar" class="navbar-icon navbar-icon-main-page" title="Calendar">
                <!-- iOS Calendar -->
                <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
                    <rect x="3" y="4" width="18" height="18" rx="3" ry="3" />
                    <line x1="8" y1="2" x2="8" y2="6" />
                    <line x1="16" y1="2" x2="16" y2="6" />
                    <line x1="3" y1="10" x2="21" y2="10" />
                    <rect x="7" y="14" width="3" height="3" rx="0.5" fill="currentColor" stroke="none" />
                </svg>
            </div>
            <div id="addTask" class="navbar-icon shadow-4" title="Add Task">
                <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2.5" stroke-linecap="round">
                    <line x1="12" y1="5" x2="12" y2="19" />
                    <line x1="5" y1="12" x2="19" y2="12" />
                </svg>
            </div>
            <div id="note" class="navbar-icon navbar-icon-main-page" title="Notes">
                <!-- iOS Notes (square.and.pencil) -->
                <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M12 3H6a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h12a3 3 0 0 0 3-3v-6" />
                    <path d="M14.5 3.5l6 6L13 17l-4.5 1 1-4.5z" />
                </svg>
            </div>
            <div id="setting" class="navbar-icon navbar-icon-main-page" title="Settings">
                <!-- iOS Settings (gearshape) -->
                <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="12" cy="12" r="3" />
                    <path
                        d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z" />
                </svg>
            </div>
        </div>

        <div id="task-form-container" class="hide">
            <form id="taskForm" class="form-container">
                <h1>Nuova Task</h1>

                <!-- Segmented Control: Genre -->
                <div class="form-section">
                    <div class="segmented-control" id="genere-control">
                        <button type="button" class="segment active" data-value="task">Task</button>
                        <button type="button" class="segment" data-value="event">Evento</button>
                        <button type="button" class="segment" data-value="note">Nota</button>
                    </div>
                    <select id="genere" class="hide" required>
                        <option value="task" selected>Task</option>
                        <option value="event">Eventi</option>
                        <option value="note">Note</option>
                    </select>
                </div>

                <!-- Title -->
                <div class="form-section">
                    <input type="text" id="titolo" class="form-input" placeholder="Titolo *" required>
                </div>

                <!-- Tag (for Task/Event) -->
                <div class="form-section task">
                    <label class="form-label">Tag</label>
                    <div class="pill-selector" id="tag-selector">
                        <button type="button" class="pill" data-value="lavoro">üíº Lavoro</button>
                        <button type="button" class="pill" data-value="personale">üè† Personale</button>
                        <button type="button" class="pill" data-value="studio">üìö Studio</button>
                    </div>
                    <select id="tag" class="hide" required>
                        <option value="" disabled selected></option>
                        <option value="lavoro">Lavoro</option>
                        <option value="personale">Personale</option>
                        <option value="studio">Studio</option>
                    </select>
                </div>

                <!-- Categoria (for Notes) -->
                <div class="form-section input-group-note hide">
                    <label class="form-label">Categoria</label>
                    <div class="pill-selector" id="categoria-selector">
                        <button type="button" class="pill" data-value="progetti">üìã Progetti</button>
                        <button type="button" class="pill" data-value="idee">üí° Idee</button>
                        <button type="button" class="pill" data-value="bussines">üí∞ Business</button>
                        <button type="button" class="pill" data-value="obbietivi">üéØ Obiettivi</button>
                    </div>
                    <select id="categoria" class="hide" required>
                        <option value="" disabled selected></option>
                        <option value="progetti">Progetti</option>
                        <option value="idee">Idee</option>
                        <option value="bussines">Bussines</option>
                        <option value="obbietivi">Obbietivi</option>
                    </select>
                </div>

                <!-- Daily Task Toggle -->
                <div class="form-section task">
                    <div class="toggle-row">
                        <span class="toggle-label">Task giornaliera</span>
                        <label class="ios-toggle">
                            <input type="checkbox" id="taskGiornaliera">
                            <span class="ios-toggle-slider"></span>
                        </label>
                    </div>
                </div>

                <!-- Priority & Urgency (shown for daily tasks) -->
                <div id="input-priority" class="form-section task hide">
                    <label class="form-label">Urgenza</label>
                    <div class="pill-selector" id="urgenza-selector">
                        <button type="button" class="pill pill-danger" data-value="alta">üî¥ Alta</button>
                        <button type="button" class="pill pill-warning" data-value="media">üü° Media</button>
                        <button type="button" class="pill pill-success" data-value="bassa">üü¢ Bassa</button>
                    </div>
                    <select id="urgenza" class="hide">
                        <option value="" disabled selected></option>
                        <option value="alta">Alta</option>
                        <option value="media">Media</option>
                        <option value="bassa">Bassa</option>
                    </select>

                    <label class="form-label" style="margin-top: 12px;">Priorit√†</label>
                    <div class="pill-selector" id="priorita-selector">
                        <button type="button" class="pill pill-danger" data-value="alta">üî¥ Alta</button>
                        <button type="button" class="pill pill-warning" data-value="media">üü° Media</button>
                        <button type="button" class="pill pill-success" data-value="bassa">üü¢ Bassa</button>
                    </div>
                    <select id="priorita" class="hide">
                        <option value="" disabled selected></option>
                        <option value="alta">Alta</option>
                        <option value="media">Media</option>
                        <option value="bassa">Bassa</option>
                    </select>
                </div>

                <!-- Start Date/Time -->
                <div class="form-section task task-today">
                    <label class="form-label">Inizio</label>
                    <div class="date-time-row">
                        <div class="date-time-field">
                            <input type="date" id="inizioData" class="form-input form-input-sm">
                        </div>
                        <div class="date-time-field">
                            <input type="time" id="inizioOra" class="form-input form-input-sm" value="00:00">
                        </div>
                    </div>
                </div>

                <!-- In Giornata Toggle -->
                <div class="form-section task task-today">
                    <div class="toggle-row">
                        <span class="toggle-label">Termina in giornata</span>
                        <label class="ios-toggle">
                            <input type="checkbox" id="inGiornata">
                            <span class="ios-toggle-slider"></span>
                        </label>
                    </div>
                </div>

                <!-- End Date/Time -->
                <p class="group-task task-today end-task hide" style="display:none"></p>
                <div class="form-section task task-today end-task">
                    <label class="form-label">Fine</label>
                    <div class="date-time-row">
                        <div class="date-time-field">
                            <input type="date" id="fineData" class="form-input form-input-sm">
                        </div>
                        <div class="date-time-field">
                            <input type="time" id="fineOra" class="form-input form-input-sm" value="00:00">
                        </div>
                    </div>
                </div>

                <!-- Details -->
                <div class="form-section">
                    <textarea id="dettagli" class="form-textarea" placeholder="Dettagli (opzionale)..."
                        rows="3"></textarea>
                </div>

                <button type="submit" class="save-button">Salva</button>
            </form>
        </div>

        <main></main>

        <!-- Search Overlay -->
        <div id="search-overlay" class="hide">
            <div class="search-box">
                <div class="search-header">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                        stroke="var(--text-tertiary)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="11" cy="11" r="8" />
                        <line x1="21" y1="21" x2="16.65" y2="16.65" />
                    </svg>
                    <input type="text" id="search-input" placeholder="Cerca task, note, eventi..." autocomplete="off">
                    <button id="search-close" class="search-close-btn">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                            <line x1="18" y1="6" x2="6" y2="18" />
                            <line x1="6" y1="6" x2="18" y2="18" />
                        </svg>
                    </button>
                </div>
                <div id="search-results" class="search-results">
                    <p class="search-hint">Digita almeno 2 caratteri...</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Register Service Worker
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then(reg => console.log('SW registered:', reg.scope))
                    .catch(err => console.log('SW registration failed:', err));
            });
        }
    </script>
</body>

</html>